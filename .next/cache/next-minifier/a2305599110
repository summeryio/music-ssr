{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"a56a\"],{\"+A8i\":function(t,e,a){\"use strict\";a.d(e,\"d\",function(){return r}),a.d(e,\"f\",function(){return i}),a.d(e,\"e\",function(){return c}),a.d(e,\"a\",function(){return u}),a.d(e,\"c\",function(){return l}),a.d(e,\"b\",function(){return o});var n=a(\"3W+V\");function r(t){return{type:n.y,payload:{page:t}}}function i(t,e){return{type:n.A,payload:{data:t,more:e}}}function c(){return{type:n.z}}function u(t){return{type:n.v,payload:{page:t}}}function l(t,e){return{type:n.x,payload:{data:t,more:e}}}function o(){return{type:n.w}}},HBP4:function(t,e,a){\"use strict\";a.r(e);var n=a(\"ln6h\"),r=a.n(n),i=a(\"O40h\"),c=a(\"0iUn\"),u=a(\"sLSF\"),l=a(\"MI3g\"),o=a(\"a7VT\"),s=a(\"Tit0\"),m=a(\"q1tI\"),d=a.n(m),f=a(\"YFqc\"),h=a.n(f),p=a(\"HMs9\"),b=a.n(p),v=a(\"/MKj\"),g=a(\"+A8i\"),E=a(\"b0oO\"),y=a(\"VFWX\"),O=a(\"Qn3X\"),k=function(t){function e(t){var a;Object(c.default)(this,e),a=Object(l.default)(this,Object(o.default)(e).call(this,t));var n=t.album;return a.state={albumData:n,page:0,finished:!1,isFoot:!0},a}return Object(s.default)(e,t),Object(u.default)(e,[{key:\"componentDidMount\",value:function(){this.props.isServer&&this.props.fetchListAlbum(0)}},{key:\"touchStart\",value:function(t){this.startx=t.touches[0].pageX,this.starty=t.touches[0].pageY}},{key:\"touchEnd\",value:function(t){var e,a;switch(e=t.changedTouches[0].pageX,a=t.changedTouches[0].pageY,this.getDirection(this.startx,this.starty,e,a)){case 0:break;case 1:this.loadData()}}},{key:\"getAngle\",value:function(t,e){return 180*Math.atan2(e,t)/Math.PI}},{key:\"getDirection\",value:function(t,e,a,n){var r=a-t,i=n-e,c=0;if(Math.abs(r)<2&&Math.abs(i)<2)return c;var u=this.getAngle(r,i);return u>=-135&&u<=-45?c=1:u>45&&u<135?c=2:u>=135&&u<=180||u>=-180&&u<-135?c=3:u>=-45&&u<=45&&(c=4),c}},{key:\"loadData\",value:function(){var t=this,e=this.props.fetchListAlbum;this.refs.onPullUp.clientHeight-(document.body.scrollTop||document.documentElement.scrollTop)-10<document.documentElement.clientHeight&&this.state.isFoot&&this.setState({isFoot:!1,page:this.state.page+1},function(){e(t.state.page)})}},{key:\"render\",value:function(){var t=this.state,e=t.albumData,a=t.finished,n=t.isFoot;return d.a.createElement(\"div\",{id:\"album\"},d.a.createElement(E.a,{title:\"新碟上架\"}),d.a.createElement(\"div\",{className:\"scroll_wrapper\",ref:\"onPullUp\",onTouchStart:this.touchStart.bind(this),onTouchEnd:this.touchEnd.bind(this)},d.a.createElement(\"ul\",{className:\"list\"},e.map(function(t,e){return d.a.createElement(\"li\",{key:t.id},d.a.createElement(\"div\",{className:\"pic\"},d.a.createElement(b.a,{height:\"3.72rem\",placeholder:d.a.createElement(\"img\",{src:\"/static/images/img_default.svg\"})},d.a.createElement(O.a,{imgUrl:t.picUrl+\"?param=400y400\"}))),d.a.createElement(\"p\",{className:\"desc\"},t.name),d.a.createElement(h.a,{href:{pathname:\"/detail/album\",query:{id:t.id}}},d.a.createElement(\"a\",{className:\"mask\"})))})),a?d.a.createElement(\"p\",{className:\"scroll-tip\"},\"我是有底线的\"):e.length&&n?d.a.createElement(\"p\",{className:\"scroll-tip\"},\"上拉加载更多\"):d.a.createElement(y.a,null)))}}],[{key:\"getDerivedStateFromProps\",value:function(t,e){return t.album&&t.album!==e.albumData?{albumData:t.album,isFoot:t.more,finished:!t.more}:null}}]),e}(m.Component),j=Object(v.b)(function(t){return{album:t.list.album.albums,more:t.list.album.more}},function(t){return{fetchListAlbum:function(e){t(Object(g.a)(e))}}})(k);j.getInitialProps=function(){var t=Object(i.default)(r.a.mark(function t(e){var a,n,i;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.ctx,n=a.store,i=a.isServer,n.dispatch(Object(g.a)(0)),t.abrupt(\"return\",{isServer:i});case 3:case\"end\":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}();e.default=j},b0oO:function(t,e,a){\"use strict\";a.d(e,\"a\",function(){return h});var n=a(\"0iUn\"),r=a(\"sLSF\"),i=a(\"MI3g\"),c=a(\"a7VT\"),u=a(\"Tit0\"),l=a(\"q1tI\"),o=a.n(l),s=a(\"YFqc\"),m=a.n(s),d=a(\"nOHt\"),f=a.n(d),h=function(t){function e(){return Object(n.default)(this,e),Object(i.default)(this,Object(c.default)(e).apply(this,arguments))}return Object(u.default)(e,t),Object(r.default)(e,[{key:\"render\",value:function(){var t=this.props.title;return o.a.createElement(\"div\",{id:\"header_title\"},o.a.createElement(\"a\",{onClick:function(){f.a.back()}},o.a.createElement(\"i\",{className:\"iconfont icon-left\"})),o.a.createElement(\"p\",null,t),o.a.createElement(m.a,{href:\"/\"},o.a.createElement(\"a\",null,o.a.createElement(\"i\",{className:\"iconfont icon-home\"}))))}}]),e}(l.Component)},sCAt:function(t,e,a){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/list/album\",function(){var t=a(\"HBP4\");return{page:t.default||t}}])}},[[\"sCAt\",\"5d41\",\"9da1\"]]]);"}