{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"446b\"],{\"+A8i\":function(t,e,a){\"use strict\";a.d(e,\"d\",function(){return i}),a.d(e,\"f\",function(){return r}),a.d(e,\"e\",function(){return l}),a.d(e,\"a\",function(){return c}),a.d(e,\"c\",function(){return s}),a.d(e,\"b\",function(){return u});var n=a(\"3W+V\");function i(t){return{type:n.y,payload:{page:t}}}function r(t,e){return{type:n.A,payload:{data:t,more:e}}}function l(){return{type:n.z}}function c(t){return{type:n.v,payload:{page:t}}}function s(t,e){return{type:n.x,payload:{data:t,more:e}}}function u(){return{type:n.w}}},b0oO:function(t,e,a){\"use strict\";a.d(e,\"a\",function(){return h});var n=a(\"0iUn\"),i=a(\"sLSF\"),r=a(\"MI3g\"),l=a(\"a7VT\"),c=a(\"Tit0\"),s=a(\"q1tI\"),u=a.n(s),o=a(\"YFqc\"),p=a.n(o),d=a(\"nOHt\"),f=a.n(d),h=function(t){function e(){return Object(n.default)(this,e),Object(r.default)(this,Object(l.default)(e).apply(this,arguments))}return Object(c.default)(e,t),Object(i.default)(e,[{key:\"render\",value:function(){var t=this.props.title;return u.a.createElement(\"div\",{id:\"header_title\"},u.a.createElement(\"a\",{onClick:function(){f.a.back()}},u.a.createElement(\"i\",{className:\"iconfont icon-left\"})),u.a.createElement(\"p\",null,t),u.a.createElement(p.a,{href:\"/\"},u.a.createElement(\"a\",null,u.a.createElement(\"i\",{className:\"iconfont icon-home\"}))))}}]),e}(s.Component)},nZhP:function(t,e,a){\"use strict\";a.r(e);var n=a(\"ln6h\"),i=a.n(n),r=a(\"O40h\"),l=a(\"6BQ9\"),c=a.n(l),s=a(\"0iUn\"),u=a(\"sLSF\"),o=a(\"MI3g\"),p=a(\"a7VT\"),d=a(\"Tit0\"),f=a(\"q1tI\"),h=a.n(f),m=a(\"YFqc\"),y=a.n(m),v=(a(\"HMs9\"),a(\"/MKj\")),b=a(\"+A8i\"),g=a(\"b0oO\"),E=a(\"VFWX\"),O=a(\"Qn3X\"),k=function(t){function e(t){var a;Object(s.default)(this,e),a=Object(o.default)(this,Object(p.default)(e).call(this,t));var n=t.playlist;return a.state={playlistData:n,page:0,finished:!1,isFoot:!0},a}return Object(d.default)(e,t),Object(u.default)(e,[{key:\"componentDidMount\",value:function(){this.props.isServer&&this.props.fetchListPlaylist(0)}},{key:\"touchStart\",value:function(t){this.startx=t.touches[0].pageX,this.starty=t.touches[0].pageY}},{key:\"touchEnd\",value:function(t){var e,a;switch(e=t.changedTouches[0].pageX,a=t.changedTouches[0].pageY,this.getDirection(this.startx,this.starty,e,a)){case 0:break;case 1:this.loadData()}}},{key:\"getAngle\",value:function(t,e){return 180*Math.atan2(e,t)/Math.PI}},{key:\"getDirection\",value:function(t,e,a,n){var i=a-t,r=n-e,l=0;if(Math.abs(i)<2&&Math.abs(r)<2)return l;var c=this.getAngle(i,r);return c>=-135&&c<=-45?l=1:c>45&&c<135?l=2:c>=135&&c<=180||c>=-180&&c<-135?l=3:c>=-45&&c<=45&&(l=4),l}},{key:\"loadData\",value:function(){var t=this,e=this.props.fetchListPlaylist;this.refs.onPullUp.clientHeight-(document.body.scrollTop||document.documentElement.scrollTop)-10<document.documentElement.clientHeight&&this.state.isFoot&&this.setState({isFoot:!1,page:this.state.page+1},function(){e(t.state.page)})}},{key:\"render\",value:function(){var t=this.state,e=t.playlistData,a=t.finished,n=t.isFoot;return h.a.createElement(\"div\",{id:\"playlist\"},h.a.createElement(g.a,{title:\"推荐歌单\"}),h.a.createElement(\"div\",{className:\"scroll_wrapper\",ref:\"onPullUp\",onTouchStart:this.touchStart.bind(this),onTouchEnd:this.touchEnd.bind(this)},h.a.createElement(\"ul\",{className:\"list m-music__list\"},e.length?e.map(function(t,e){t.playCount>1e5?c()(t.playCount/1e4):c()(t.playCount);return h.a.createElement(\"li\",{key:t.id},h.a.createElement(\"div\",{className:\"pic\"},h.a.createElement(O.a,{url:t.coverImgUrl,size:400})),h.a.createElement(\"p\",{className:\"desc\"},t.name),h.a.createElement(y.a,{href:{pathname:\"/detail/playlist\",query:{id:t.id}}},h.a.createElement(\"a\",{className:\"link\"})))}):h.a.createElement(E.a,null)),a?h.a.createElement(\"p\",{className:\"scroll-tip\"},\"我是有底线的\"):e.length&&n?h.a.createElement(\"p\",{className:\"scroll-tip\"},\"上拉加载更多\"):h.a.createElement(E.a,null)))}}],[{key:\"getDerivedStateFromProps\",value:function(t,e){return t.playlist&&t.playlist!==e.playlistData?{playlistData:t.playlist,isFoot:t.more,finished:!t.more}:null}}]),e}(f.Component),j=Object(v.b)(function(t){return{playlist:t.list.playlist.playlists,more:t.list.playlist.more}},function(t){return{fetchListPlaylist:function(e){t(Object(b.d)(e))}}})(k);j.getInitialProps=function(){var t=Object(r.default)(i.a.mark(function t(e){var a,n,r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.ctx,n=a.store,r=a.isServer,n.dispatch(Object(b.d)(0)),t.abrupt(\"return\",{isServer:r});case 3:case\"end\":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}();e.default=j},vSzD:function(t,e,a){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/list/playlist\",function(){var t=a(\"nZhP\");return{page:t.default||t}}])}},[[\"vSzD\",\"5d41\",\"9da1\"]]]);"}