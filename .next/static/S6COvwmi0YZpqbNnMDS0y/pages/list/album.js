(window.webpackJsonp=window.webpackJsonp||[]).push([["a56a"],{"+A8i":function(t,e,a){"use strict";a.d(e,"d",function(){return r}),a.d(e,"f",function(){return u}),a.d(e,"e",function(){return i}),a.d(e,"a",function(){return c}),a.d(e,"c",function(){return l}),a.d(e,"b",function(){return o});var n=a("3W+V");function r(t){return{type:n.B,payload:{page:t}}}function u(t,e){return{type:n.D,payload:{data:t,more:e}}}function i(){return{type:n.C}}function c(t){return{type:n.y,payload:{page:t}}}function l(t,e){return{type:n.A,payload:{data:t,more:e}}}function o(){return{type:n.z}}},"70ZN":function(t,e,a){"use strict";a.d(e,"a",function(){return f});var n=a("0iUn"),r=a("sLSF"),u=a("MI3g"),i=a("a7VT"),c=a("Tit0"),l=a("q1tI"),o=a.n(l),s=a("VFWX"),f=function(t){function e(t){var a;return Object(n.default)(this,e),(a=Object(u.default)(this,Object(i.default)(e).call(this,t))).state={page:0,isFoot:!0,len:0},a}return Object(c.default)(e,t),Object(r.default)(e,[{key:"touchStart",value:function(t){this.startx=t.touches[0].pageX,this.starty=t.touches[0].pageY}},{key:"touchEnd",value:function(t){var e,a;switch(e=t.changedTouches[0].pageX,a=t.changedTouches[0].pageY,this.getDirection(this.startx,this.starty,e,a)){case 0:break;case 1:this.loadData()}}},{key:"getAngle",value:function(t,e){return 180*Math.atan2(e,t)/Math.PI}},{key:"getDirection",value:function(t,e,a,n){var r=a-t,u=n-e,i=0;if(Math.abs(r)<2&&Math.abs(u)<2)return i;var c=this.getAngle(r,u);return c>=-135&&c<=-45?i=1:c>45&&c<135?i=2:c>=135&&c<=180||c>=-180&&c<-135?i=3:c>=-45&&c<=45&&(i=4),i}},{key:"loadData",value:function(){var t=this,e=this.props.fetchData;this.refs.onPullUp.clientHeight-(document.body.scrollTop||document.documentElement.scrollTop)-10<document.documentElement.clientHeight&&this.state.isFoot&&this.setState({isFoot:!1,page:this.state.page+1},function(){e(t.state.page)})}},{key:"render",value:function(){var t=this.props,e=t.more,a=t.len,n=t.children;return o.a.createElement("div",{className:"scroll_wrapper",ref:"onPullUp",onTouchStart:this.touchStart.bind(this),onTouchEnd:this.touchEnd.bind(this)},n,e?a&&this.state.isFoot?o.a.createElement("p",{className:"scroll-tip"},"上拉加载更多"):o.a.createElement(s.a,null):o.a.createElement("p",{className:"scroll-tip"},"我是有底线的"))}}],[{key:"getDerivedStateFromProps",value:function(t,e){return t.len&&t.len!==e.len?{len:t.len,isFoot:!0}:null}}]),e}(l.Component)},HBP4:function(t,e,a){"use strict";a.r(e);var n=a("ln6h"),r=a.n(n),u=a("O40h"),i=a("0iUn"),c=a("sLSF"),l=a("MI3g"),o=a("a7VT"),s=a("Tit0"),f=a("q1tI"),m=a.n(f),d=a("YFqc"),h=a.n(d),p=(a("HMs9"),a("/MKj")),b=a("+A8i"),v=a("b0oO"),y=(a("VFWX"),a("Qn3X")),g=a("70ZN"),E=function(t){function e(t){var a;Object(i.default)(this,e),a=Object(l.default)(this,Object(o.default)(e).call(this,t));var n=t.album;return a.state={albumData:n,more:!0},a}return Object(s.default)(e,t),Object(c.default)(e,[{key:"componentDidMount",value:function(){this.props.isServer&&this.props.fetchListAlbum(0)}},{key:"render",value:function(){var t=this.state,e=t.albumData,a=t.more;return m.a.createElement("div",{id:"album"},m.a.createElement(v.a,{title:"新碟上架"}),m.a.createElement(g.a,{fetchData:this.props.fetchListAlbum,len:e.length,more:a},m.a.createElement("ul",{className:"list m-music__list"},e.map(function(t,e){return m.a.createElement("li",{key:t.id},m.a.createElement("div",{className:"pic"},m.a.createElement(y.a,{url:t.picUrl,size:400})),m.a.createElement("p",{className:"desc"},t.name),m.a.createElement(h.a,{href:{pathname:"/detail/album",query:{id:t.id}}},m.a.createElement("a",{className:"link"})))}))))}}],[{key:"getDerivedStateFromProps",value:function(t,e){return t.album&&t.album!==e.albumData?{albumData:t.album,more:t.more}:null}}]),e}(f.Component),O=Object(p.b)(function(t){return{album:t.list.album.albums,more:t.list.album.more}},function(t){return{fetchListAlbum:function(e){t(Object(b.a)(e))}}})(E);O.getInitialProps=function(){var t=Object(u.default)(r.a.mark(function t(e){var a,n,u;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.ctx,n=a.store,u=a.isServer,n.dispatch(Object(b.a)(0)),t.abrupt("return",{isServer:u});case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}();e.default=O},b0oO:function(t,e,a){"use strict";a.d(e,"a",function(){return h});var n=a("0iUn"),r=a("sLSF"),u=a("MI3g"),i=a("a7VT"),c=a("Tit0"),l=a("q1tI"),o=a.n(l),s=a("YFqc"),f=a.n(s),m=a("nOHt"),d=a.n(m),h=function(t){function e(){return Object(n.default)(this,e),Object(u.default)(this,Object(i.default)(e).apply(this,arguments))}return Object(c.default)(e,t),Object(r.default)(e,[{key:"render",value:function(){var t=this.props.title;return o.a.createElement("div",{id:"header_title"},o.a.createElement("a",{onClick:function(){d.a.back()}},o.a.createElement("i",{className:"iconfont icon-left"})),o.a.createElement("p",null,t),o.a.createElement(f.a,{href:"/"},o.a.createElement("a",null,o.a.createElement("i",{className:"iconfont icon-home"}))))}}]),e}(l.Component)},sCAt:function(t,e,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/list/album",function(){var t=a("HBP4");return{page:t.default||t}}])}},[["sCAt","5d41","9da1"]]]);