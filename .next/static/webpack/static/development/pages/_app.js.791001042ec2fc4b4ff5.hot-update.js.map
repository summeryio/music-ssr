{"version":3,"file":"static/webpack/static\\development\\pages\\_app.js.791001042ec2fc4b4ff5.hot-update.js","sources":["webpack:///./redux/sagas/detail/playlist.js"],"sourcesContent":["import fetch from 'isomorphic-unfetch'\r\nimport { take, put, fork, select } from 'redux-saga/effects';\r\nimport { FETCH_DETAIL_PLSYLIST } from '../../../constants/ActionTypes';\r\nimport { URL_HEADER } from '../../../constants/ConstTypes';\r\nimport { fetchDetailPlaylistFail, fetchDetailPlaylistSuccess } from '../../actions/detail';\r\n\r\nexport function* playlist() {\r\n  while(true) {\r\n    const query = yield select(state => state.detail.playlist)\r\n\r\n    try {\r\n      const res = yield fetch(`${URL_HEADER}/playlist/detail?id=${query.id}`);\r\n      const data = yield res.json();\r\n      if (data.code === 200) {\r\n        if (data.playlist.tracks.length > 10) {\r\n          data.playlist.tracks = data.playlist.tracks.filter((song, i) => {\r\n            console.log(i);\r\n            return i > 10\r\n          })\r\n        }\r\n        \r\n        yield put(fetchDetailPlaylistSuccess(data.playlist));\r\n      }\r\n    } catch(error) {\r\n      yield put(fetchDetailPlaylistFail(error));\r\n    }\r\n\r\n    yield take(FETCH_DETAIL_PLSYLIST);\r\n  }\r\n}\r\n\r\n\r\nexport default [\r\n  fork(playlist)\r\n]"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAMA;AACA;AAPA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAEA;AAAA;AAAA;AACA;AAHA;AAEA;AAFA;AAAA;AAKA;AACA;AANA;AAKA;AALA;AAMA;AACA;AAPA;AAMA;AACA;AAPA;AAAA;AAAA;AAAA;AACA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AAdA;AAeA;AACA;AAhBA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAkBA;AACA;AAnBA;AAAA;AAqBA;AACA;AAtBA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA0BA;;;;A","sourceRoot":""}