{"version":3,"file":"static/webpack/static/development/pages/detail/album.js.9d4e8af2461b69df5e53.hot-update.js","sources":["webpack:///./components/Detail/Album.js"],"sourcesContent":["import React, { Component } from 'react'\nimport { withRouter } from 'next/router'\nimport { connect } from 'react-redux';\nimport { fetchDetailAlbum } from '../../redux/actions/detail';\n\nimport {formatDateYMD} from '../../core/util'\nimport Header from '../Header'\nimport Loading from '../Loading'\nimport Img from '../Img'\nimport SongList from '../SongList'\n\nclass Album extends Component {\n    constructor(props) {\n        super(props)\n        \n        // const { router: { query } } = props;\n\n        this.state = {\n            albumData: {}\n        }\n    }\n\n    static getDerivedStateFromProps(nextProps, prevState) {\n        if (nextProps.album && nextProps.album !== prevState.albumData) {\n            return {\n                albumData: nextProps.album\n            };\n        }\n        \n        return null; \n    }\n\n    componentDidMount() {\n        const { router: { query } } = this.props;\n        \n        fetchDetailAlbum(query.id)\n    }\n    \n    render() {\n        let {albumData} = this.state\n        let album = Object.keys(albumData).length ? albumData.album : {}\n        \n        return (\n            <div id=\"album_detail\">\n                <Header title=\"歌单\"/>\n                {\n                    Object.keys(albumData).length ? (\n                        <div>\n                            <div className=\"header\">\n                                <div className=\"bg\" style={{backgroundImage: `url(${album.picUrl})`}}></div>\n                                <div className=\"cont\">\n                                    <img src={album.picUrl + '?param=400y400'} />\n                                    <div className=\"info\">\n                                        <p>{album.name}</p>\n                                        {album.company ? <p>发行公司：{album.company}</p> : null}\n                                        <p>创建时间：{formatDateYMD(album.createTime)}</p>\n                                    </div>\n                                </div>\n                            </div>\n                            <SongList songs={albumData.songs} />\n                         </div>\n                    ) : <Loading full={true}/>\n                }\n            </div>\n        )\n    }\n}\n\n\nconst mapStateToProps = state => ({\n    album: state.detail.album.albums\n});\n  \nconst mapDispatchToProps = dispatch => ({\n    fetchDetailAlbum(id) {\n      dispatch(fetchDetailAlbum(id));\n    }\n});\n  \nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(Album));"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAGA;AACA;AADA;AALA;AAQA;AACA;;;AAWA;AAAA;AACA;AAEA;AACA;;;AAEA;AAAA;AAEA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;;;AA3CA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;;;;AAnBA;AACA;AAyDA;AAAA;AACA;AADA;AAAA;AACA;AAGA;AAAA;AACA;AACA;AACA;AAHA;AAAA;AACA;AAKA;;;;A","sourceRoot":""}